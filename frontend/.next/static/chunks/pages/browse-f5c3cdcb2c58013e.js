(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{8791:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/browse",function(){return o(2962)}])},2962:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return c}});var n=o(5893),r=o(7294),s=o(1664),a=o.n(s),l=o(1343);function c(){let[e,t]=(0,r.useState)([]),[o,s]=(0,r.useState)(!0),[c,i]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{x();let e=setInterval(x,5e3);return()=>clearInterval(e)},[]);let x=async()=>{try{let e="http://localhost:3001";console.log("Fetching rooms from:","".concat(e,"/api/rooms"));let o=await fetch("".concat(e,"/api/rooms"));if(!o.ok)throw Error("HTTP ".concat(o.status,": ").concat(o.statusText));let n=await o.json();console.log("Rooms fetched:",n),t(n),i("")}catch(e){console.error("Error fetching rooms:",e),i("Failed to fetch rooms: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{s(!1)}},p=e=>{if(!d.trim()){i("Please enter your name");return}l.W.emit("room:join",{roomId:e,username:d.trim()}),l.W.on("room:joined",t=>{window.location.href="/room/".concat(e,"?username=").concat(encodeURIComponent(d))}),l.W.on("error",e=>{i(e.message)}),h(e)};return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-700 to-indigo-800 p-4",children:(0,n.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,n.jsxs)("div",{className:"text-center mb-12",children:[(0,n.jsx)(a(),{href:"/",className:"inline-block text-white hover:text-purple-200 mb-4",children:"← Back to Home"}),(0,n.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"\uD83C\uDFB5 Join a Room"}),(0,n.jsx)("p",{className:"text-purple-100",children:"Pick a live broadcast and start listening"})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8 max-w-md mx-auto",children:[(0,n.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Your Name"}),(0,n.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),placeholder:"Enter your name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 mb-4",onKeyPress:t=>{"Enter"===t.key&&e.length>0&&p(e[0].roomId)}}),c&&(0,n.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-3 py-2 rounded text-sm",children:c})]}),o&&(0,n.jsx)("div",{className:"text-center text-white",children:(0,n.jsx)("p",{children:"Loading rooms..."})}),o||0!==e.length?(0,n.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow",children:[e.isLive&&(0,n.jsx)("div",{className:"mb-3 inline-block",children:(0,n.jsxs)("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-2",children:[(0,n.jsx)("span",{className:"inline-block w-2 h-2 bg-white rounded-full animate-pulse"}),"LIVE"]})}),(0,n.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:e.roomName}),(0,n.jsxs)("p",{className:"text-gray-600 text-sm mb-4",children:[e.guestCount," listener",1!==e.guestCount?"s":""]}),(0,n.jsx)("button",{onClick:()=>p(e.roomId),disabled:u===e.roomId,className:"w-full bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-400",children:u===e.roomId?"Joining...":"▶️ Join Room"})]},e.roomId))}):(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-12 text-center max-w-2xl mx-auto",children:[(0,n.jsx)("p",{className:"text-xl text-gray-600 mb-4",children:"No live broadcasts at the moment."}),(0,n.jsx)(a(),{href:"/",className:"text-purple-600 hover:text-purple-700 font-bold",children:"Start your own broadcast →"})]})]})})}},1343:function(e,t,o){"use strict";o.d(t,{W:function(){return n}});let n=(0,o(7642).ZP)("http://localhost:3001",{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5,transports:["websocket","polling"]})}},function(e){e.O(0,[642,664,888,774,179],function(){return e(e.s=8791)}),_N_E=e.O()}]);